#+OPTIONS: <:nil c:nil todo:nil toc:nil tags:nil broken-links:t

* LaTeX Configuration :noexport:
#+macro: pythonval src_python[:session :results raw]{$1}
#+LATEX_CLASS_OPTIONS: [10pt]

#+begin_src python :session :results none :exports none
import pickle
with open("../results/processed_results_data.pickle", 'rb') as handle:
    d = pickle.load(handle)
#+end_src

* Automatically Incorporating and Updating Results

This document shows how it is possible to incorporate results, statistics, and plots generated by a separate process---e.g., via GNU Make---in a document compiled via \LaTeX{}.

* Including results via Python and Org Mode :ignore:

I often use Org-Mode when writing publications and grants, as it is a featureful markup language that can be exported to \LaTeX{}. When exported, Org can be configured to run code blocks and include variables from that code block inline with the text. For example, the document can be made to include results statistics generated via =make process-results=:

In experiments, we evaluated the relative performance with and without the inclusion of \textsc{ransac} when fitting a line to our noisy data across {{{pythonval(d['num_seeds'])}}} procedurally generated examples. Our performance target was a reduction in mean squared error (\textsc{mse}) on the held out evaluation sets for each.
The \textsc{mse} for Least Squares alone was  {{{pythonval(f"{d['mse_lstsq']:0.2f}")}}} compared to a \textsc{mse} of {{{pythonval(f"{d['mse_ransac']:0.2f}")}}} when using \textsc{ransac}, an improvement of
{{{pythonval(f"{100*(d['mse_lstsq'] - d['mse_ransac'])/d['mse_lstsq']:0.1f}")}}}%.[fn::The percent improvement was evaluated via Python, using the values loaded from the results data file.]

We additionally show a scatterplot of the results, in which each point corresponds to the performance for each approach on a single set of randomly generated data:

\vspace{-1em}
#+ATTR_LATEX: :placement [h] :width 3in
#+LABEL: fig:scatterplot
#+CAPTION: Scatterplot showing the improvement RANSAC affords. Figure auto-exported from Inkscape via GNU Make
[[file:figures/scatterplot.png]]
